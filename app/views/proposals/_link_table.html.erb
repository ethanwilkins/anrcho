<!-- proposals -->

<% comments_present = proposal.comments.present? and ((proposal.comments.size.eql? 1 and not \
	proposal.comments.last.created_at.nil?) or proposal.comments.size > 1) %>
<% comment_link_text = comments_present ? "Comments #{proposal.comments.size}" : "Comment" %>
<% comment_link_path = defined?(commenting) ? proposal_path(proposal) : new_proposal_comment_path(proposal) %>
<% remote = comment_link_path.eql?(proposal_path(proposal)) ? false : true %>

<table id="link_table_<%= proposal.id %>">
	<tr>
		<td>
			<% _class = up_voted?(proposal) ? :voted_on : nil %>
			<%= link_to "For", up_vote_path(proposal),
				remote: true, class: _class, id: "up_vote_proposal_#{proposal.id}" %>
		</td>
		<td>·</td>
		<td>
			<% _class = down_voted?(proposal) ? :voted_on : nil %>
			<%= link_to "Against", down_vote_path(proposal),
				remote: true, class: _class, id: "down_vote_proposal_#{proposal.id}" %>
		</td>
		<td>·</td>
		<td>
			<%= link_to comment_link_text, comment_link_path,
				remote: remote, id: "new_comment_link_#{proposal.id}" %>
		</td>
	</tr>
</table>