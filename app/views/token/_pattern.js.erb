// token// token

// color changes will reflect actual changes in their respective feeds
// speed of change and emphasis of certain colors depicting certain site conditions

var pattern = <%=j pattern.to_json %>

var rgb = [0, 0, 0];
var fat_rgb = [false, false, false]; // ensures pos/neg
var color_min = 25; // when it should go back up
var color_max = 255; // when color should go back down
var change_rate = 1; // added/subbed each round
var change_speed = 1; // interval speed


for (var i=0; i < rgb.length; i++) {
	rgb[i] = Math.round(Math.random() * 255);
}

setInterval(function() {
	// morphs all of rgb back and forth
	for (var i=0; i < 3; i++) {
		// flips colors direction of change
		if (rgb[i] <= color_min) {
			fat_rgb[i] = false;
		} else if (rgb[i] >= color_max) {
			fat_rgb[i] = true;
		}
		// fattens or shrinks primaries
		if (fat_rgb[i]) {
			rgb[i] -= change_rate;
		} else {
			rgb[i] += change_rate;
		}
	}
	// actually applies change
	var section_link = $(id_str);
	section_link.css("background", "rgb(" + rgb[id][0] + ", " + rgb[id][1] + ", " + rgb[id][2] + ")");
}, change_speed);


